{"version":3,"file":"micro-frontend.js","sources":["../../src/applications/launcher.js","../../src/applications/application.js","../../src/lifecycles/bootstrap.js","../../src/lifecycles/load.js","../../src/lifecycles/mount.js","../../src/lifecycles/umount.js","../../src/start.js","../../src/navigations/reroute.js","../../src/navigations/event.js"],"sourcesContent":["/*\n * @Author: Tianhao Feng\n * @Date: 2021-03-25 10:27:29\n * @LastEditTime: 2021-03-25 11:36:13\n * @LastEditors: Please set LastEditors\n * @Description: In User Settings Edit\n * @FilePath: \\micro-frontend-frame\\src\\applications\\launcher.js\n */\n\nexport const APP_STATUS = {\n  NOT_LOADED: 'NOT_LOADED',\n  LOADING_RESOURCE: 'LOADING_RESOURCE',\n  NOT_BOOTSTRAPPED: 'NOT_BOOTSTRAPPED',\n  BOOTSTRAPPED: 'BOOTSTRAPPED',\n  NOT_MOUNTED: 'NOT_MOUNTED',\n  MOUNTING: 'MOUNTING',\n  MOUNTED: 'MOUNTED',\n  UPDATING: 'UPDATING',\n  UMOUNT: 'UMOUNT',\n  DESTROYED: 'DESTROYED',\n  LOAD_ERROR: 'LOAD_ERROR',\n  SKIP_BECAUSE_BROKEN: 'SKIP_BECAUSE_BROKEN'\n}\n\nexport function isActivated(app) {\n  return app.status == APP_STATUS.MOUNTED;\n}\n\nexport function shouldBeActivated(app) {\n  return app.status !== APP_STATUS.SKIP_BECAUSE_BROKEN && app.activateWhen(window.location);\n}","/*\n * @Author: Tianhao Feng\n * @Date: 2021-03-24 16:46:47\n * @LastEditTime: 2021-03-25 11:48:48\n * @LastEditors: Please set LastEditors\n * @Description: In User Settings Edit\n * @FilePath: \\micro-frontend-frame\\src\\applications\\application.js\n */\n\nimport { APP_STATUS, shouldBeActivated } from \"./launcher\";\nimport { reroute } from \"../navigations/reroute\";\n\nconst apps = [];\n\n/**\n * @description: registerApplication\n * @param {*} appName\n * @param {*} loadApp\n * @param {*} activateWhen\n * @param {*} customProps\n * @return {*}\n */\nexport function registerApplication(appName, loadApp, activateWhen, customProps) {\n  apps.push({appName, loadApp, activateWhen, customProps, status: APP_STATUS.NOT_LOADED});\n\n  reroute();\n}\n\nexport function getAppsChange() {\n  const appsToUmount = [];\n  const appsToLoad = [];\n  const appsToMount = [];\n\n  apps.forEach(app => {\n    const appShouldBeActivated = shouldBeActivated(app);\n    switch(app.status) {\n      case APP_STATUS.NOT_LOADED:\n      case APP_STATUS.LOADING_RESOURCE:\n        if(appShouldBeActivated) {\n          appsToLoad.push(app);\n        }\n        break;\n      case APP_STATUS.NOT_BOOTSTRAPPED:\n      case APP_STATUS.BOOTSTRAPPED:\n      case APP_STATUS.NOT_MOUNTED:\n        if(appShouldBeActivated) {\n          appsToMount.push(app);\n        }\n        break;\n      case APP_STATUS.MOUNTED:\n        if(!appShouldBeActivated) {\n          appsToUmount.push(app);\n        }\n        break;\n      case APP_STATUS.UMOUNT:\n        appsToUmount.push(app);\n        break;\n      default:\n    }\n  });\n\n  return { appsToLoad, appsToMount, appsToUmount};\n}","import { APP_STATUS } from \"../applications/launcher\";\n\n/*\n * @Author: Tianhao Feng\n * @Date: 2021-03-25 13:53:21\n * @LastEditTime: 2021-03-25 14:01:45\n * @Description: \n * @FilePath: \\micro-frontend-frame\\src\\lifecycles\\bootstrap.js\n */\nexport async function toBootstrapPromise(app) {\n  if (app.status !== APP_STATUS.NOT_BOOTSTRAPPED) {\n    return app;\n  }\n\n  app.status = APP_STATUS.BOOTSTRAPPED;\n  await app.bootstrap(app.customProps);\n  app.status = APP_STATUS.NOT_MOUNTED;\n  return app;\n}","/*\n * @Author: Tianhao Feng\n * @Date: 2021-03-25 11:52:56\n * @LastEditTime: 2021-03-25 14:52:46\n * @Description: \n * @FilePath: \\micro-frontend-frame\\src\\lifecycles\\load.js\n */\nimport { APP_STATUS } from \"../applications/launcher\";\n\nfunction flattenArray(fns) {\n  fns = Array.isArray(fns) ? fns: [fns];\n  return (props) => fns.reduce((promise, fn) => promise.then(() => fn(props)), Promise.resolve());\n}\n\nexport async function toLoadPromise(app) {\n  if (app.onLoadingPromise) {\n    return app.onLoadingPromise;\n  }\n\n  return (app.onLoadingPromise = Promise.resolve().then(async () => {\n    app.status = APP_STATUS.LOADING_RESOURCE;\n    const { bootstrap, mount, umount } = await app.loadApp(app.customProps);\n    app.status = APP_STATUS.NOT_BOOTSTRAPPED;\n    app.bootstrap = flattenArray(bootstrap);\n    app.mount = mount;\n    app.umount = umount;\n    delete app.onLoadingPromise;\n    return app;\n  }));\n}\n","import { APP_STATUS } from \"../applications/launcher\";\n\n/*\n * @Author: Tianhao Feng\n * @Date: 2021-03-25 13:53:47\n * @LastEditTime: 2021-03-25 14:03:09\n * @Description: \n * @FilePath: \\micro-frontend-frame\\src\\lifecycles\\mount.js\n */\nexport async function toMountPromise(app) {\n  if (app.status !== APP_STATUS.NOT_MOUNTED) {\n    return app;\n  }\n\n  app.status = APP_STATUS.MOUNTING;\n  await app.mount(app.customProps);\n  app.status = APP_STATUS.MOUNTED;\n  return app;\n}","import { APP_STATUS } from \"../applications/launcher\";\n\n/*\n * @Author: Tianhao Feng\n * @Date: 2021-03-25 13:47:28\n * @LastEditTime: 2021-03-25 13:49:24\n * @Description: \n * @FilePath: \\micro-frontend-frame\\src\\lifecycles\\umount.js\n */\nexport async function toUmountPromise(app) {\n  if (app.status !== APP_STATUS.MOUNTED) {\n    return app;\n  }\n  app.status = APP_STATUS.UMOUNT;\n  await app.umount(app.customProps);\n  app.status = APP_STATUS.NOT_MOUNTED;\n  return app;\n}","/*\n * @Author: Tianhao Feng\n * @Date: 2021-03-24 16:47:04\n * @LastEditTime: 2021-03-25 14:47:59\n * @LastEditors: Please set LastEditors\n * @Description: In User Settings Edit\n * @FilePath: \\micro-frontend-frame\\src\\start.js\n */\n\nimport { reroute } from \"./navigations/reroute\";\n\nlet started = false;\n\n/**\n * @description: isStarted\n * @param {*}\n * @return {*}\n */\nexport function isStarted() {\n  return started;\n}\n\n/**\n * @description: start\n * @param {*}\n * @return {*}\n */\nexport function start() {\n  started = true;\n  reroute();\n}","/*\n * @Author: Tianhao Feng\n * @Date: 2021-03-25 11:06:05\n * @LastEditTime: 2021-03-25 15:57:47\n * @Description: \n * @FilePath: \\micro-frontend-frame\\src\\navigations\\reroute.js\n */\n\nimport { getAppsChange } from \"../applications/application\";\nimport { toBootstrapPromise } from \"../lifecycles/bootstrap\";\nimport { toLoadPromise } from \"../lifecycles/load\";\nimport { toMountPromise } from \"../lifecycles/mount\";\nimport { toUmountPromise } from \"../lifecycles/umount\";\nimport { isStarted } from \"../start\";\n\nexport function reroute() {\n\n  // Get apps list expect to load\n  // Get apps list expect to mount\n  // Get apps list expect to umount\n  const { appsToLoad, appsToMount, appsToUmount } = getAppsChange();\n  console.log('reroute:', appsToLoad, appsToMount, appsToUmount);\n\n  if (isStarted()) {\n    console.log('app start');\n    return performAppChange();\n  } else {\n    console.log('app register');\n    return loadApps();\n  }\n\n  async function loadApps() {\n    const apps = await Promise.all(appsToLoad.map(toLoadPromise));\n  };\n\n  async function performAppChange() {\n    const umountPromises = appsToUmount.map(toUmountPromise);\n\n    appsToLoad.map(async app => {\n      app = await toLoadPromise(app);\n      app = await toBootstrapPromise(app);\n      return await toMountPromise(app);\n    });\n\n    appsToMount.map(async app => {\n      app = await toBootstrapPromise(app);\n      return toMountPromise(app);\n    });\n  };\n}","/*\n * @Author: Tianhao Feng\n * @Date: 2021-03-25 15:09:05\n * @LastEditTime: 2021-03-25 15:47:56\n * @Description: \n * @FilePath: \\micro-frontend-frame\\src\\navigations\\event.js\n */\n\nimport { reroute } from \"./reroute\";\n\nconst ROUTE_EVENTS = {\n  HASH_CHANGE: 'hashchange',\n  POP_STATE: 'popstate',\n}\n\nexport const routeEventsListeningTo = [ROUTE_EVENTS.HASH_CHANGE, ROUTE_EVENTS.POP_STATE];\n\nconst urlReroute = () => {\n  reroute([], arguments);\n};\n\nconst capturedEventListeners = {}\ncapturedEventListeners[ROUTE_EVENTS.HASH_CHANGE] = [];\ncapturedEventListeners[ROUTE_EVENTS.POP_STATE] = [];\n\nwindow.addEventListener(ROUTE_EVENTS.HASH_CHANGE, urlReroute);\nwindow.addEventListener(ROUTE_EVENTS.POP_STATE, urlReroute);\n\nconst originalRemoveEventListener = window.removeEventListener;\nconst originalAddEventListener = window.addEventListener;\n\nwindow.addEventListener = function(eventName, fn) {\n  if (routeEventsListeningTo.includes(eventName) && !capturedEventListeners[eventName].some(listener => listener === fn)) {\n    capturedEventListeners[eventName].push(fn);\n    return;\n  }\n  return originalAddEventListener.apply(this, arguments);\n}\n\nwindow.removeEventListener = function(eventName, fn) {\n  if (routeEventsListeningTo.includes(eventName)) {\n    capturedEventListeners[eventName] = capturedEventListeners[eventName].filter(listener => listener !== fn);\n  }\n  return originalRemoveEventListener.apply(this, arguments);\n}\n\nconst patchedUpdateState = (state, method) => {\n  return function () {\n    const beforeUrl = window.location.href;\n    state.apply(this, arguments);\n    const effectedUrl = window.location.href;\n\n    if (beforeUrl !== effectedUrl) {\n      urlReroute(new PopStateEvent(method));\n    }\n  }\n}\n\nwindow.history.pushState = patchedUpdateState(window.history.pushState, 'pushState');\nwindow.history.replaceState = patchedUpdateState(window.history.replaceState, 'replaceState');"],"names":[],"mappings":"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"}